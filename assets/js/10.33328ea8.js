(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{522:function(t,a,e){t.exports=e.p+"assets/img/call-stack-base.93de7ff3.png"},523:function(t,a,e){t.exports=e.p+"assets/img/error.a39cdaa5.png"},524:function(t,a,e){t.exports=e.p+"assets/img/RangeError.7094da39.png"},525:function(t,a,e){t.exports=e.p+"assets/img/WebAPIs.80f6e345.jpg"},526:function(t,a){t.exports="data:image/png;base64,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"},572:function(t,a,e){"use strict";e.r(a);var s=e(3),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"}),s("h3",{attrs:{id:"前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),s("h4",{attrs:{id:"本篇文章是javascript重塑篇的第五篇-事件循环-event-loop-。从javascript这门语言在宿主环境下的运行时机制-理解event-loop-以及研究任务与微任务。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本篇文章是javascript重塑篇的第五篇-事件循环-event-loop-。从javascript这门语言在宿主环境下的运行时机制-理解event-loop-以及研究任务与微任务。"}},[t._v("#")]),t._v(" 本篇文章是JavaScript重塑篇的第五篇-事件循环(Event Loop)。从JavaScript这门语言在宿主环境下的运行时机制，理解Event Loop，以及研究任务与微任务。")])]),s("h4",{attrs:{id:"我们一般都说-javascript-后面统称js-是一个单线程、非堵塞、异步的脚本语言。那我们来一个个理解一下。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#我们一般都说-javascript-后面统称js-是一个单线程、非堵塞、异步的脚本语言。那我们来一个个理解一下。"}},[t._v("#")]),t._v(" 我们一般都说，JavaScript(后面统称JS)是一个单线程、非堵塞、异步的脚本语言。那我们来一个个理解一下。")]),t._v(" "),s("h2",{attrs:{id:"单线程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单线程"}},[t._v("#")]),t._v(" 单线程")]),t._v(" "),s("h4",{attrs:{id:"js本身没有线程一说-它的线程取决于它的运行环境-在常用的游览器和node的宿主环境下-是单线程的运行机制。那么什么是单线程呢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#js本身没有线程一说-它的线程取决于它的运行环境-在常用的游览器和node的宿主环境下-是单线程的运行机制。那么什么是单线程呢"}},[t._v("#")]),t._v(" JS本身没有线程一说，它的线程取决于它的运行环境，在常用的游览器和node的宿主环境下，是单线程的运行机制。那么什么是单线程呢？")]),t._v(" "),s("h4",{attrs:{id:"前段时间不是双十一了么。冬天-冷。攒钱买了件厚睡衣。双十一人多-去排队拿快递。只有一个小哥在那里-一个个排着队拿着爱的号码牌。轮到谁谁就报号取件。这就是单线程了。咱们回到js-就是每次只能执行一段代码-这段代码不执行完毕-不能进行下一段代码。它不具备并行任务的特性。-就是不具备多个小哥同时拿zhao件ke"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前段时间不是双十一了么。冬天-冷。攒钱买了件厚睡衣。双十一人多-去排队拿快递。只有一个小哥在那里-一个个排着队拿着爱的号码牌。轮到谁谁就报号取件。这就是单线程了。咱们回到js-就是每次只能执行一段代码-这段代码不执行完毕-不能进行下一段代码。它不具备并行任务的特性。-就是不具备多个小哥同时拿zhao件ke"}},[t._v("#")]),t._v(" 前段时间不是双十一了么。冬天，冷。攒钱买了件厚睡衣。双十一人多，去排队拿快递。只有一个小哥在那里，一个个排着队拿着爱的号码牌。轮到谁谁就报号取件。这就是单线程了。咱们回到JS，就是每次只能执行一段代码，这段代码不执行完毕，不能进行下一段代码。它不具备并行任务的特性。(就是不具备多个小哥同时拿zhao件ke)")]),t._v(" "),s("h4",{attrs:{id:"这里有没有想过js的主线程是怎么推进这些事情的呢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#这里有没有想过js的主线程是怎么推进这些事情的呢"}},[t._v("#")]),t._v(" 这里有没有想过JS的主线程是怎么推进这些事情的呢？")]),t._v(" "),s("h2",{attrs:{id:"调用栈"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#调用栈"}},[t._v("#")]),t._v(" 调用栈")]),t._v(" "),s("h4",{attrs:{id:"js的运行环提供的v8引擎-它有一个单独的调用栈-call-stack-来记录函数调用的数据结构。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#js的运行环提供的v8引擎-它有一个单独的调用栈-call-stack-来记录函数调用的数据结构。"}},[t._v("#")]),t._v(" JS的运行环提供的V8引擎，它有一个单独的调用栈(call stack)来记录函数调用的数据结构。")]),t._v(" "),s("h4",{attrs:{id:"那么对刚才的内容举个例子-假设有下面这样一段js代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#那么对刚才的内容举个例子-假设有下面这样一段js代码"}},[t._v("#")]),t._v(" 那么对刚才的内容举个例子，假设有下面这样一段JS代码")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("function bar() {\n}\nfunction foo() {\n  bar();\n}\nfoo();\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("h4",{attrs:{id:"它在调用栈中是这样的表现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#它在调用栈中是这样的表现"}},[t._v("#")]),t._v(" 它在调用栈中是这样的表现")]),t._v(" "),s("p",[s("img",{attrs:{src:e(522),alt:"call-stack-base"}})]),t._v(" "),s("h4",{attrs:{id:"在这个示例中"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在这个示例中"}},[t._v("#")]),t._v(" 在这个示例中，")]),t._v(" "),s("p",[t._v("1.运行了某个js文件，调用栈call Stack为空置状态；"),s("br"),t._v("\n2.执行main函数，把main推入调用栈call Stack；"),s("br"),t._v("\n3.执行main函数里面的foo函数，把foo推入调用栈call Stack；"),s("br"),t._v("\n4.执行foo函数里面的bar函数，把bar推入调用栈call Stack；"),s("br"),t._v("\n5.执行完bar拿到返回值，把bar弹出调用栈call Stack；"),s("br"),t._v("\n6.执行完foo拿到返回值，把foo弹出调用栈call Stack；"),s("br"),t._v("\n7.执行完当前脚本，main弹出栈。")]),t._v(" "),s("h4",{attrs:{id:"这张图说明了调用在执行这一段代码的时候的变迁-总结一下"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#这张图说明了调用在执行这一段代码的时候的变迁-总结一下"}},[t._v("#")]),t._v(" 这张图说明了调用在执行这一段代码的时候的变迁，总结一下：")]),t._v(" "),s("blockquote",[s("p",[t._v("调用栈是一个记录当前程序所在位置的数据结构，如果当前进入了某个函数，这个函数会被放在栈里面。如果离开了某个函数，这个函数会被弹出栈外。")])]),t._v(" "),s("h2",{attrs:{id:"栈的追踪"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#栈的追踪"}},[t._v("#")]),t._v(" 栈的追踪")]),t._v(" "),s("h4",{attrs:{id:"我们可以发现-调用栈整体是一个先进后出-后进先出的特点-整体有一种链式关系-通过游览器的报错我们可以清晰的看到栈的顺序-修改一下刚才的那段代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#我们可以发现-调用栈整体是一个先进后出-后进先出的特点-整体有一种链式关系-通过游览器的报错我们可以清晰的看到栈的顺序-修改一下刚才的那段代码"}},[t._v("#")]),t._v(" 我们可以发现，调用栈整体是一个先进后出，后进先出的特点，整体有一种链式关系，通过游览器的报错我们可以清晰的看到栈的顺序，修改一下刚才的那段代码")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(" function bar() {\n   throw new Error('oh huo');\n }\n function foo() {\n   bar();\n }\n foo();\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("h4",{attrs:{id:"把这段代码放到游览器中执行-可以看到会报错"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#把这段代码放到游览器中执行-可以看到会报错"}},[t._v("#")]),t._v(" 把这段代码放到游览器中执行，可以看到会报错：")]),t._v(" "),s("p",[s("img",{attrs:{src:e(523),alt:"error"}})]),t._v(" "),s("h4",{attrs:{id:"可以从这个报错信息看到-和图中相似也就是和栈中相似的结构。通过这个信息可以直到-报错产生再函数bar中-而函数bar在函数foo中调用。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#可以从这个报错信息看到-和图中相似也就是和栈中相似的结构。通过这个信息可以直到-报错产生再函数bar中-而函数bar在函数foo中调用。"}},[t._v("#")]),t._v(" 可以从这个报错信息看到，和图中相似也就是和栈中相似的结构。通过这个信息可以直到，报错产生再函数bar中，而函数bar在函数foo中调用。")]),t._v(" "),s("h2",{attrs:{id:"栈溢出"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#栈溢出"}},[t._v("#")]),t._v(" 栈溢出")]),t._v(" "),s("h4",{attrs:{id:"再次修改代码-如下"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#再次修改代码-如下"}},[t._v("#")]),t._v(" 再次修改代码，如下：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("function foo() {\n  foo();\n}\nfoo();\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h4",{attrs:{id:"递归调用自身且不设置开关-会出现什么样的情况呢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#递归调用自身且不设置开关-会出现什么样的情况呢"}},[t._v("#")]),t._v(" 递归调用自身且不设置开关，会出现什么样的情况呢？")]),t._v(" "),s("p",[s("img",{attrs:{src:e(524),alt:"error"}})]),t._v(" "),s("h4",{attrs:{id:"这段代码会进入一个死循环-那么栈中不断地被添加新的执行函数-这样就-撑炸-了-因此-chrome游览器限制了栈的大小是16000帧。如果超出了这个大小就会中断进程并且报错。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#这段代码会进入一个死循环-那么栈中不断地被添加新的执行函数-这样就-撑炸-了-因此-chrome游览器限制了栈的大小是16000帧。如果超出了这个大小就会中断进程并且报错。"}},[t._v("#")]),t._v(" 这段代码会进入一个死循环，那么栈中不断地被添加新的执行函数，这样就“撑炸”了，因此，chrome游览器限制了栈的大小是16000帧。如果超出了这个大小就会中断进程并且报错。")]),t._v(" "),s("h2",{attrs:{id:"非阻塞"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#非阻塞"}},[t._v("#")]),t._v(" 非阻塞")]),t._v(" "),s("h4",{attrs:{id:"刚刚解释了单线程调用栈的问题-这里我们遇见了新的大问题-就是代码的-阻塞-。不过幸好-js是一个-非阻塞-的语言。讲-非阻塞-之前-我们先来说说什么是阻塞"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#刚刚解释了单线程调用栈的问题-这里我们遇见了新的大问题-就是代码的-阻塞-。不过幸好-js是一个-非阻塞-的语言。讲-非阻塞-之前-我们先来说说什么是阻塞"}},[t._v("#")]),t._v(" 刚刚解释了单线程调用栈的问题，这里我们遇见了新的大问题，就是代码的“阻塞”。不过幸好，JS是一个“非阻塞”的语言。讲“非阻塞”之前，我们先来说说什么是阻塞？")]),t._v(" "),s("h4",{attrs:{id:"回到之前的那个例子。假如取快递只有一个窗口-那后面的人越来越多-那就会很慢-影响父老乡亲拆快递。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#回到之前的那个例子。假如取快递只有一个窗口-那后面的人越来越多-那就会很慢-影响父老乡亲拆快递。"}},[t._v("#")]),t._v(" 回到之前的那个例子。假如取快递只有一个窗口，那后面的人越来越多，那就会很慢，影响父老乡亲拆快递。")]),t._v(" "),s("h4",{attrs:{id:"程序也是一样的。我们一行行的执行代码。后面的代码不就要等前面的代码执行完成后才能执行-如果代码执行的很慢-那就阻塞的更加严重。比如"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#程序也是一样的。我们一行行的执行代码。后面的代码不就要等前面的代码执行完成后才能执行-如果代码执行的很慢-那就阻塞的更加严重。比如"}},[t._v("#")]),t._v(" 程序也是一样的。我们一行行的执行代码。后面的代码不就要等前面的代码执行完成后才能执行，如果代码执行的很慢，那就阻塞的更加严重。比如：")]),t._v(" "),s("h4",{attrs:{id:"我们点击一个名为打印的按钮。在控制台输出0-100000-然后再点击一个value加1的按钮-是旁边元素的text值加1显示。当0-100000还没有打印完的时候-点击value加1是没有效果的-因为这是js还在执行0-100000的打印。只有等打印完毕才会继续执行value加1操作。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#我们点击一个名为打印的按钮。在控制台输出0-100000-然后再点击一个value加1的按钮-是旁边元素的text值加1显示。当0-100000还没有打印完的时候-点击value加1是没有效果的-因为这是js还在执行0-100000的打印。只有等打印完毕才会继续执行value加1操作。"}},[t._v("#")]),t._v(" 我们点击一个名为打印的按钮。在控制台输出0-100000，然后再点击一个value加1的按钮，是旁边元素的text值加1显示。当0-100000还没有打印完的时候，点击value加1是没有效果的，因为这是js还在执行0-100000的打印。只有等打印完毕才会继续执行value加1操作。")]),t._v(" "),s("h4",{attrs:{id:"这下我们明白了-当调用栈里面有东西的时候-你再去干别的事情-可以-排着队。想渲染页面-想运行代码-好的-等着吧。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#这下我们明白了-当调用栈里面有东西的时候-你再去干别的事情-可以-排着队。想渲染页面-想运行代码-好的-等着吧。"}},[t._v("#")]),t._v(" 这下我们明白了，当调用栈里面有东西的时候，你再去干别的事情，可以，排着队。想渲染页面，想运行代码，好的，等着吧。")]),t._v(" "),s("h4",{attrs:{id:"阻塞-我们搞清楚了。这是很难受的事情-严重影响了体验。那么-非阻塞-简单来说-就是解决这个问题。这时候-就轮到我们的-异步-登场了"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#阻塞-我们搞清楚了。这是很难受的事情-严重影响了体验。那么-非阻塞-简单来说-就是解决这个问题。这时候-就轮到我们的-异步-登场了"}},[t._v("#")]),t._v(" “阻塞”我们搞清楚了。这是很难受的事情，严重影响了体验。那么“非阻塞”，简单来说，就是解决这个问题。这时候，就轮到我们的“异步”登场了！")]),t._v(" "),s("h2",{attrs:{id:"异步"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#异步"}},[t._v("#")]),t._v(" 异步")]),t._v(" "),s("h4",{attrs:{id:"前面提到了-如果我们在加载文件或者进行一个网络请求-如果是同步进行-那就会导致-阻塞-的问题-那么解决这个问题的方法就是-异步-。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前面提到了-如果我们在加载文件或者进行一个网络请求-如果是同步进行-那就会导致-阻塞-的问题-那么解决这个问题的方法就是-异步-。"}},[t._v("#")]),t._v(" 前面提到了，如果我们在加载文件或者进行一个网络请求，如果是同步进行，那就会导致“阻塞”的问题，那么解决这个问题的方法就是“异步”。")]),t._v(" "),s("h4",{attrs:{id:"具体怎么做呢-举个栗子"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#具体怎么做呢-举个栗子"}},[t._v("#")]),t._v(" 具体怎么做呢？ 举个栗子：")]),t._v(" "),s("h4",{attrs:{id:"在一个老餐馆里-只有一个服务员-单线程-需要服务员分别去记录客人点单。这时候来了三桌客人-三个函数-如果按照同步思维-第一桌点完-才能轮到第二桌点餐。如果遇到一个选择困难症的-那就卡住了。这时候的第一桌、第二桌、第三桌都好比是一个网络请求-快慢不同-但是互不关联。那么应该如何处理呢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在一个老餐馆里-只有一个服务员-单线程-需要服务员分别去记录客人点单。这时候来了三桌客人-三个函数-如果按照同步思维-第一桌点完-才能轮到第二桌点餐。如果遇到一个选择困难症的-那就卡住了。这时候的第一桌、第二桌、第三桌都好比是一个网络请求-快慢不同-但是互不关联。那么应该如何处理呢"}},[t._v("#")]),t._v(" 在一个老餐馆里，只有一个服务员(单线程)，需要服务员分别去记录客人点单。这时候来了三桌客人(三个函数)，如果按照同步思维，第一桌点完，才能轮到第二桌点餐。如果遇到一个选择困难症的，那就卡住了。这时候的第一桌、第二桌、第三桌都好比是一个网络请求，快慢不同，但是互不关联。那么应该如何处理呢？")]),t._v(" "),s("h4",{attrs:{id:"当第一桌进来的时候-服务员上前递给客人菜单-并告诉客人选好后叫我下单。第二桌来了-同样的-给客人餐单-告诉第二桌客人选好了叫我-我来给你下单。第三桌亦是如此。当任意一桌选好后-就可以呼叫下单。这样就不会卡住了。解决了问题。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#当第一桌进来的时候-服务员上前递给客人菜单-并告诉客人选好后叫我下单。第二桌来了-同样的-给客人餐单-告诉第二桌客人选好了叫我-我来给你下单。第三桌亦是如此。当任意一桌选好后-就可以呼叫下单。这样就不会卡住了。解决了问题。"}},[t._v("#")]),t._v(" 当第一桌进来的时候，服务员上前递给客人菜单，并告诉客人选好后叫我下单。第二桌来了，同样的，给客人餐单，告诉第二桌客人选好了叫我，我来给你下单。第三桌亦是如此。当任意一桌选好后，就可以呼叫下单。这样就不会卡住了。解决了问题。")]),t._v(" "),s("h4",{attrs:{id:"换到我们代码执行里-那我们不久可以在执行到类似网络请求的时候-把它仍一边-我去做我的事情-等你好了再叫我。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#换到我们代码执行里-那我们不久可以在执行到类似网络请求的时候-把它仍一边-我去做我的事情-等你好了再叫我。"}},[t._v("#")]),t._v(" 换到我们代码执行里，那我们不久可以在执行到类似网络请求的时候，把它仍一边，我去做我的事情，等你好了再叫我。")]),t._v(" "),s("h4",{attrs:{id:"没错-这样好像解决了问题了。想想我们常用的一些api-settimeout、setinterval、promise等等-如果在node环境下就更多了-它们都有一个回调函数-等到一定时间后才执行。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#没错-这样好像解决了问题了。想想我们常用的一些api-settimeout、setinterval、promise等等-如果在node环境下就更多了-它们都有一个回调函数-等到一定时间后才执行。"}},[t._v("#")]),t._v(" 没错，这样好像解决了问题了。想想我们常用的一些API，"),s("code",[t._v("setTimeout")]),t._v("、"),s("code",[t._v("setInterval")]),t._v("、"),s("code",[t._v("Promise")]),t._v("等等，如果在Node环境下就更多了，它们都有一个回调函数，等到一定时间后才执行。")]),t._v(" "),s("h4",{attrs:{id:"ok-异步的大概思路搞定了-就是我们把需要等待后在执行的函数给仍一边-继续我们的主线程-等它可以执行内容了在执行。但是这样还有点问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ok-异步的大概思路搞定了-就是我们把需要等待后在执行的函数给仍一边-继续我们的主线程-等它可以执行内容了在执行。但是这样还有点问题"}},[t._v("#")]),t._v(" ok，异步的大概思路搞定了，就是我们把需要等待后在执行的函数给仍一边，继续我们的主线程，等它可以执行内容了在执行。但是这样还有点问题：")]),t._v(" "),s("p",[t._v("1.我们把等待的东西放一边去，放哪呢？\n2.如果需要等待的事情有点多，它们又同时结束，那怎么办，先执行哪一个?"),s("br"),t._v("\n3.有个等待的结束了，回来找主线程执行了，主线程正在做的事情就要停下来，然后做你的么？")]),t._v(" "),s("h2",{attrs:{id:"webapis和任务队列"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webapis和任务队列"}},[t._v("#")]),t._v(" WebAPIs和任务队列")]),t._v(" "),s("h4",{attrs:{id:"解决上面的几个问题-这就是webapis和任务队列-task-queue-的事情。我们先建立一个模型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决上面的几个问题-这就是webapis和任务队列-task-queue-的事情。我们先建立一个模型"}},[t._v("#")]),t._v(" 解决上面的几个问题，这就是WebAPIs和任务队列(Task Queue)的事情。我们先建立一个模型：")]),t._v(" "),s("p",[t._v("1.正常的进行调用栈的操作，函数入栈，但是遇到异步任务时，放到一个由C++实现得游览器创建的WebAPIs的线程中去完成，然后继续执行自己的同步任务，完成后出栈；\n2.在主线程进行的过程中，WebAPIs会变成完成这些等待，把等待好的回调函数，放到“任务队列”中去；\n3.这个时候有一个叫做Event Loop的角色，它在上面的几步的基础上，做一件事情，监听调用栈的任务队列，当调用栈为空时，并且任务队列中有东西，那么就把任务队列中的第一项弹出，推到调用栈中。调用栈则继续着第一步操作。")]),t._v(" "),s("h4",{attrs:{id:"由此-可以大体绘制一个基本运行图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#由此-可以大体绘制一个基本运行图"}},[t._v("#")]),t._v(" 由此，可以大体绘制一个基本运行图：")]),t._v(" "),s("p",[s("img",{attrs:{src:e(525),alt:"WebAPIs"}})]),t._v(" "),s("h4",{attrs:{id:"举一个例子"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#举一个例子"}},[t._v("#")]),t._v(" 举一个例子：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(" console.log('hi');\n setTimeout(function cb() {} {\n   console.log('wait');\n }, 5000);\n console.log('bye');\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("h4",{attrs:{id:"这样一段代码-它的执行流程大概是这样的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#这样一段代码-它的执行流程大概是这样的"}},[t._v("#")]),t._v(" 这样一段代码，它的执行流程大概是这样的：")]),t._v(" "),s("p",[t._v("1.开始执行脚本，main函数入栈，Event Loop开始监听；"),s("br"),t._v("\n2.console.log('hi')入栈，执行，然后出栈；"),s("br"),t._v("\n3.setTimeout(cb, 5000)入栈，执行，然后把5000ms和cb函数的信息给WebAPIs；setTimeout出栈；与此同时，WebAPIs开始执行5000ms的timer计时；"),s("br"),t._v("\n4.console.log('bye')入栈，执行，然后出栈；"),s("br"),t._v("\n5.主线程执行完毕，main出栈；Event Loop持续监听发现调用栈为空，任务队列也是空，继续监听；"),s("br"),t._v("\n6.当WebAPI接收到cb函数开始的5000ms结束后，把cb函数放在任务队列；"),s("br"),t._v("\n7.Event Loop发现任务队列有了一个任务，并且调用栈为空，把cb函数弹出来，推入到调用栈执行；"),s("br"),t._v("\n8.console.log('wait’)入栈，执行，然后出栈；"),s("br"),t._v("\n9.cb函数执行完毕，cb出栈。")]),t._v(" "),s("h4",{attrs:{id:"这个设计模型实际上还是蛮简单的。至此-一个事件循环的模型-我们已经可以清晰的表达了。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#这个设计模型实际上还是蛮简单的。至此-一个事件循环的模型-我们已经可以清晰的表达了。"}},[t._v("#")]),t._v(" 这个设计模型实际上还是蛮简单的。至此，一个事件循环的模型，我们已经可以清晰的表达了。")]),t._v(" "),s("h2",{attrs:{id:"任务-task-与微任务-microtask"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#任务-task-与微任务-microtask"}},[t._v("#")]),t._v(" 任务(Task)与微任务(MicroTask)")]),t._v(" "),s("h4",{attrs:{id:"理解了单线程-非阻塞-异步的含义-也搞明白了event-loop事在情况的基础上做什么样的一件事情。那么我们再回过头关注一下细节。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#理解了单线程-非阻塞-异步的含义-也搞明白了event-loop事在情况的基础上做什么样的一件事情。那么我们再回过头关注一下细节。"}},[t._v("#")]),t._v(" 理解了单线程，非阻塞，异步的含义，也搞明白了Event Loop事在情况的基础上做什么样的一件事情。那么我们再回过头关注一下细节。")]),t._v(" "),s("h4",{attrs:{id:"刚才讲到异步的时候。我们是想解决带有同步阻塞性质的问题-最终是通过异步回调机制解决的-将常用的一些带有延时性回调的api丢给webapis去执行。完成后放入任务队列等待执行。这实际上是游览器帮我们干的事-webapis是游览器的一个线程-settimeout、setinterval、xhr这些api也是由宿主环境提供的-v8中找不到相关代码的。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#刚才讲到异步的时候。我们是想解决带有同步阻塞性质的问题-最终是通过异步回调机制解决的-将常用的一些带有延时性回调的api丢给webapis去执行。完成后放入任务队列等待执行。这实际上是游览器帮我们干的事-webapis是游览器的一个线程-settimeout、setinterval、xhr这些api也是由宿主环境提供的-v8中找不到相关代码的。"}},[t._v("#")]),t._v(" 刚才讲到异步的时候。我们是想解决带有同步阻塞性质的问题，最终是通过异步回调机制解决的，将常用的一些带有延时性回调的API丢给WebAPIs去执行。完成后放入任务队列等待执行。这实际上是游览器帮我们干的事，WebAPIs是游览器的一个线程，setTimeout、setInterval、XHR这些API也是由宿主环境提供的，v8中找不到相关代码的。")]),t._v(" "),s("h4",{attrs:{id:"本质上是-javascript就是一个单线程语言-一步步执行-游览器添加了一些带有延时性质的api来处理需要i-o的特殊场景-然后利用event-loop机制维护着单线程执行-以至于不会造成严重阻塞问题。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本质上是-javascript就是一个单线程语言-一步步执行-游览器添加了一些带有延时性质的api来处理需要i-o的特殊场景-然后利用event-loop机制维护着单线程执行-以至于不会造成严重阻塞问题。"}},[t._v("#")]),t._v(" 本质上是，JavaScript就是一个单线程语言，一步步执行，游览器添加了一些带有延时性质的API来处理需要I/O的特殊场景，然后利用Event Loop机制维护着单线程执行，以至于不会造成严重阻塞问题。")]),t._v(" "),s("h4",{attrs:{id:"通常我们把经历过事件循环的任务称之为一个task-最终在任务队列等待执行-当然-我们的脚本实际上就是一个任务-但是如果我们想要添加一些在每个任务后面就执行的任务呢-这个时候增加了一个概念叫做微任务-microtask-。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通常我们把经历过事件循环的任务称之为一个task-最终在任务队列等待执行-当然-我们的脚本实际上就是一个任务-但是如果我们想要添加一些在每个任务后面就执行的任务呢-这个时候增加了一个概念叫做微任务-microtask-。"}},[t._v("#")]),t._v(" 通常我们把经历过事件循环的任务称之为一个task，最终在任务队列等待执行，当然，我们的脚本实际上就是一个任务；但是如果我们想要添加一些在每个任务后面就执行的任务呢？这个时候增加了一个概念叫做微任务(MicroTask)。")]),t._v(" "),s("h4",{attrs:{id:"举例说明微任务队列"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#举例说明微任务队列"}},[t._v("#")]),t._v(" 举例说明微任务队列：")]),t._v(" "),s("h4",{attrs:{id:"同样还是在饭馆-只有一个服务员。来了三桌客人-第二桌客人想好吃啥了-把服务员叫去了-正常的点菜点完了-但是客人叫住服务员-给他们桌的人倒点茶水-拿点茶杯什么的。此时-第一桌-第三桌的人想好吃啥了-也还是等着服务员忙完了再点单。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#同样还是在饭馆-只有一个服务员。来了三桌客人-第二桌客人想好吃啥了-把服务员叫去了-正常的点菜点完了-但是客人叫住服务员-给他们桌的人倒点茶水-拿点茶杯什么的。此时-第一桌-第三桌的人想好吃啥了-也还是等着服务员忙完了再点单。"}},[t._v("#")]),t._v(" 同样还是在饭馆，只有一个服务员。来了三桌客人，第二桌客人想好吃啥了，把服务员叫去了，正常的点菜点完了，但是客人叫住服务员，给他们桌的人倒点茶水，拿点茶杯什么的。此时，第一桌，第三桌的人想好吃啥了，也还是等着服务员忙完了再点单。")]),t._v(" "),s("h4",{attrs:{id:"在这个里面-三桌客人都是三个回调函数-第二个回调函数先完成-进入了调用栈-点完菜执行完成后-又想要点茶水-服务员给他们准备茶水-这就是微任务。等这些微任务执行完成后再继续为其他客人点单。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在这个里面-三桌客人都是三个回调函数-第二个回调函数先完成-进入了调用栈-点完菜执行完成后-又想要点茶水-服务员给他们准备茶水-这就是微任务。等这些微任务执行完成后再继续为其他客人点单。"}},[t._v("#")]),t._v(" 在这个里面，三桌客人都是三个回调函数，第二个回调函数先完成，进入了调用栈，点完菜执行完成后，又想要点茶水，服务员给他们准备茶水，这就是微任务。等这些微任务执行完成后再继续为其他客人点单。")]),t._v(" "),s("h4",{attrs:{id:"微任务也是一些异步执行的回调组成的队列-每一个任务-task-都有这样的一个队列-执行完任务-就会去查询是否有微任务需要执行-执行完成才能执行下一个task。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#微任务也是一些异步执行的回调组成的队列-每一个任务-task-都有这样的一个队列-执行完任务-就会去查询是否有微任务需要执行-执行完成才能执行下一个task。"}},[t._v("#")]),t._v(" 微任务也是一些异步执行的回调组成的队列，每一个任务(task)都有这样的一个队列，执行完任务，就会去查询是否有微任务需要执行，执行完成才能执行下一个task。")]),t._v(" "),s("h4",{attrs:{id:"在es5之后-javascript引入了promise-使得javascript引擎不需要游览器的安排也可以发起任务-下面以此做一个代码示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在es5之后-javascript引入了promise-使得javascript引擎不需要游览器的安排也可以发起任务-下面以此做一个代码示例"}},[t._v("#")]),t._v(" 在ES5之后，JavaScript引入了Promise，使得JavaScript引擎不需要游览器的安排也可以发起任务，下面以此做一个代码示例：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("setTimeout(function timeFn() {\n  console.log('setTimeout');\n}, 0);\nnew Promise(function promiseFn(resolve)  {\n  console.log('Promise start');\n  resolve();\n  console.log('Promise end');\n}).then(function thenFn() {\n  console.log('then');\n});\nconsole.log('script');\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("h4",{attrs:{id:"我们来分析一下这段代码的执行过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#我们来分析一下这段代码的执行过程"}},[t._v("#")]),t._v(" 我们来分析一下这段代码的执行过程：")]),t._v(" "),s("p",[t._v("1.首先创建调用栈后，执行脚本创建main函数入栈；"),s("br"),t._v("\n2.执行setTimeout入栈，把timeFn的函数信息和0ms延迟传递给WebAPIs去执行；"),s("br"),t._v("\n3.执行Promise函数，Promise入栈，promiseFn函数立即执行，promiseFn入栈；"),s("br"),t._v("\n4.promiseFn中的调用console.log('Promise start')入栈，执行，完毕后弹出栈；"),s("br"),t._v("\n5.遇到resolve()，将then的thenFn放入到当前微任务对立，等待执行；"),s("br"),t._v("\n6.console.log('Promise end')入栈，执行完毕后弹出栈；console.log('script')调用入栈，执行完毕后出栈；"),s("br"),t._v("\n7.代码执行完毕，promiseFn、Promise、main相继出栈；"),s("br"),t._v("\n8.查询微任务队列，发现thenFn回调，入栈执行，执行完毕后出栈；"),s("br"),t._v("\n9.当前任务的微任务执行完毕，查询任务队列，发现等待完成的timeFn回调，将其入栈执行；"),s("br"),t._v("\n10.然后入栈console.log('setTimeout')，执行完毕后将其和timeFn顺次出栈。")]),t._v(" "),s("h4",{attrs:{id:"看起来很复杂-但只要能区分任务部分划分和微任务划分-就可以清晰的识别出答案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#看起来很复杂-但只要能区分任务部分划分和微任务划分-就可以清晰的识别出答案"}},[t._v("#")]),t._v(" 看起来很复杂，但只要能区分任务部分划分和微任务划分，就可以清晰的识别出答案：")]),t._v(" "),s("h4",{attrs:{id:"promise-start-promise-end-script-then-settimeout"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#promise-start-promise-end-script-then-settimeout"}},[t._v("#")]),t._v(" Promise start -> Promise end -> script -> then -> setTimeout")]),t._v(" "),s("h4",{attrs:{id:"用一张图表示微任务的执行时机"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用一张图表示微任务的执行时机"}},[t._v("#")]),t._v(" 用一张图表示微任务的执行时机：")]),t._v(" "),s("p",[s("img",{attrs:{src:e(526),alt:"call-stack-micro"}})]),t._v(" "),s("h2",{attrs:{id:"如何区分任务与微任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何区分任务与微任务"}},[t._v("#")]),t._v(" 如何区分任务与微任务")]),t._v(" "),s("h4",{attrs:{id:"现在搞清楚了什么是微任务-但是看起来微任务和任务很相似-都是把回调放队列里-等待执行-只是执行的时机不同。那我们时机应用中如何辨别哪些是微任务-哪些是任务呢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#现在搞清楚了什么是微任务-但是看起来微任务和任务很相似-都是把回调放队列里-等待执行-只是执行的时机不同。那我们时机应用中如何辨别哪些是微任务-哪些是任务呢"}},[t._v("#")]),t._v(" 现在搞清楚了什么是微任务,但是看起来微任务和任务很相似,都是把回调放队列里,等待执行，只是执行的时机不同。那我们时机应用中如何辨别哪些是微任务，哪些是任务呢？")]),t._v(" "),s("h4",{attrs:{id:"我们按照之前api的思路可以整理出"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#我们按照之前api的思路可以整理出"}},[t._v("#")]),t._v(" 我们按照之前API的思路可以整理出：")]),t._v(" "),s("blockquote",[s("p",[t._v("Task就是经历过事件循环的异步事件，也可以说就是由宿主环境发起的任务。\nMicroTask就是JavaScript引擎发起的，没有参加过事件循环的任务。")])]),t._v(" "),s("h4",{attrs:{id:"这里需要说明一点-微任务看似也是一个异步函数-但实际上是在同步的机制上完成的。任务的主要工作是在别的线程里面完成然后放入任务队列等待-而微任务并没有在别的线程上执行-它只是在当前javascript代码执行完后立刻执行的-以此实现异步。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#这里需要说明一点-微任务看似也是一个异步函数-但实际上是在同步的机制上完成的。任务的主要工作是在别的线程里面完成然后放入任务队列等待-而微任务并没有在别的线程上执行-它只是在当前javascript代码执行完后立刻执行的-以此实现异步。"}},[t._v("#")]),t._v(" 这里需要说明一点，微任务看似也是一个异步函数，但实际上是在同步的机制上完成的。任务的主要工作是在别的线程里面完成然后放入任务队列等待，而微任务并没有在别的线程上执行，它只是在当前JavaScript代码执行完后立刻执行的，以此实现异步。")]),t._v(" "),s("h4",{attrs:{id:"如何具体的区分它们-主要方式还是通过查看规范-这里直接做一下区分统计"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何具体的区分它们-主要方式还是通过查看规范-这里直接做一下区分统计"}},[t._v("#")]),t._v(" 如何具体的区分它们，主要方式还是通过查看规范，这里直接做一下区分统计：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("任务")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("chrome")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("node")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("分类")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("IO")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("Task")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("setTimeout")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("Task")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("setInterval")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("Task")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("setImmediate")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("Task")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("requestAnimationFrame")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("Task")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("process.nextTick")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("MicroTask")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("MutationObserver")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("MicroTask")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("Promise.then catch finally")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("MicroTask")])])])]),t._v(" "),s("h4",{attrs:{id:"需要注意的是-这里是以chrome游览器为主-在不同的宿主游览器下实现可能会有不同-例如-有的游览器会把promise当作task来处理。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#需要注意的是-这里是以chrome游览器为主-在不同的宿主游览器下实现可能会有不同-例如-有的游览器会把promise当作task来处理。"}},[t._v("#")]),t._v(" 需要注意的是，这里是以chrome游览器为主，在不同的宿主游览器下实现可能会有不同，例如，有的游览器会把Promise当作task来处理。")]),t._v(" "),s("h4",{attrs:{id:"好了-分清楚任务和微任务以及它们的执行时机-我们来看一道实际demo-假如有如下布局的元素"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#好了-分清楚任务和微任务以及它们的执行时机-我们来看一道实际demo-假如有如下布局的元素"}},[t._v("#")]),t._v(" 好了，分清楚任务和微任务以及它们的执行时机，我们来看一道实际demo，假如有如下布局的元素：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('<div id="outer">\n  <div id="inner"></div>\n</div>\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("h4",{attrs:{id:"然后注册这样的点击事件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#然后注册这样的点击事件"}},[t._v("#")]),t._v(" 然后注册这样的点击事件：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("const $outer = document.querySelector('.outer');\nconst $inner = document.querySelector('.inner');\n\nnew MutationObserver(_ => {\n  console.log('observer');\n}).observer($outer, {\n  atributes: true\n})\n\nfunction hander() {\n  console.log('click'); // 直接执行\n  Promise.resolve().then(function thenFn() {console.log('promise')}); // 注册 MicroTask\n  setTimeout(function timeFn() {console.log('timeout')}, 0); // 注册 Task\n  $outer.setAttribute('data-random', Math.random()); // 触发 MutationObserver 注册MicroTask\n}\n$inner.addEventListener('click', hander);\n$outer.addEventListener('click', hander);\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br")])]),s("h4",{attrs:{id:"在这个demo里-可以尝试去点击inner这个元素-也可以使用下方按钮主动调用inner的点击事件。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在这个demo里-可以尝试去点击inner这个元素-也可以使用下方按钮主动调用inner的点击事件。"}},[t._v("#")]),t._v(" 在这个demo里，可以尝试去点击inner这个元素，也可以使用下方按钮主动调用inner的点击事件。")]),t._v(" "),s("h4",{attrs:{id:"先看直接点击元素-点击后结果会出现在结果框中-它的处理顺序是这样的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#先看直接点击元素-点击后结果会出现在结果框中-它的处理顺序是这样的"}},[t._v("#")]),t._v(" 先看直接点击元素，点击后结果会出现在结果框中，它的处理顺序是这样的：")]),t._v(" "),s("p",[t._v("1.触发$inner的click事件回调，创建一个Task，然后将其推入调用栈；"),s("br"),t._v("\n2.触发$inner的click事件回调会引起冒泡，再将$outer的click事件回调添加进任务队列；"),s("br"),t._v("\n3.执行console.log('click')，推入栈执行完毕后出栈；打印'click'；"),s("br"),t._v("\n4.Promise.resolve()入栈执行后出栈，将thenFn放入当前微任务队列；"),s("br"),t._v("\n5.setTimeout入栈执行后出栈，将timeFn和0ms放入WebAPIS；开始计时；"),s("br"),t._v("\n6.修改$outer属性，触发MutationObserver微任务；将其放入微任务队列；"),s("br"),t._v("\n7.执行完当前任务，清空微任务，分别把thenFn和MutationObserver入栈后执行出栈；打印'promise'和'observer'；"),s("br"),t._v("\n8.此时调用栈和微任务队列均为空，任务队列中有$outer的click、timeFn，将$outer的click推入栈执行；"),s("br"),t._v("\n9.执行内容与添加和$inner的click一样；会输出'click'、'promise'和'observer'；并添加任务timeFn；"),s("br"),t._v("\n10.此时任务队列中还有两个timeFn，按照执行最终输出两个'timeout'。")]),t._v(" "),s("h4",{attrs:{id:"如果使用按钮直接调用-inner的click方法-那么这里的触发不再是把-inner的click当作回调异步处理-而是一种dispatchevent-相当于同步。这种方式相当于把该函数的调用作为点击该按钮时的一个上下文-其中一个执行栈而已-而其对应出发的冒泡-也会在这个上下文中执行-因此-会先输出两次-click-打印-然后查询微任务-而这里的-observer-打印一次是因为mutationobserver的触发在短时间内只触发一次-或者说在一个微任务队列中只触发一次。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如果使用按钮直接调用-inner的click方法-那么这里的触发不再是把-inner的click当作回调异步处理-而是一种dispatchevent-相当于同步。这种方式相当于把该函数的调用作为点击该按钮时的一个上下文-其中一个执行栈而已-而其对应出发的冒泡-也会在这个上下文中执行-因此-会先输出两次-click-打印-然后查询微任务-而这里的-observer-打印一次是因为mutationobserver的触发在短时间内只触发一次-或者说在一个微任务队列中只触发一次。"}},[t._v("#")]),t._v(" 如果使用按钮直接调用$inner的click方法，那么这里的触发不再是把$inner的click当作回调异步处理，而是一种dispatchEvent，相当于同步。这种方式相当于把该函数的调用作为点击该按钮时的一个上下文，其中一个执行栈而已，而其对应出发的冒泡，也会在这个上下文中执行，因此，会先输出两次'click'打印，然后查询微任务，而这里的'observer'打印一次是因为MutationObserver的触发在短时间内只触发一次，或者说在一个微任务队列中只触发一次。")]),t._v(" "),s("h4",{attrs:{id:"至此-task和microtask的执行顺序和原理基本已经掌握了。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#至此-task和microtask的执行顺序和原理基本已经掌握了。"}},[t._v("#")]),t._v(" 至此，Task和MicroTask的执行顺序和原理基本已经掌握了。")]),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("h4",{attrs:{id:"本篇从javascript运行时的特征。讲述它的需求-来解决它的需求。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本篇从javascript运行时的特征。讲述它的需求-来解决它的需求。"}},[t._v("#")]),t._v(" 本篇从JavaScript运行时的特征。讲述它的需求，来解决它的需求。")]),t._v(" "),s("h4",{attrs:{id:"搞明白它单线程的处理机制-为何要添加异步-添加异步又是如何处理-以及异步中的细节。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#搞明白它单线程的处理机制-为何要添加异步-添加异步又是如何处理-以及异步中的细节。"}},[t._v("#")]),t._v(" 搞明白它单线程的处理机制，为何要添加异步，添加异步又是如何处理，以及异步中的细节。")])])}),[],!1,null,null,null);a.default=r.exports}}]);